<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Projeto da Nasa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="Asteroides.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" id="menu">
        <div class="container-fluid">
            <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/NASA_logo.svg" alt="Logo NASA"
                class="btn-link" onclick="window.location.href = 'index.html'">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" onclick="window.location.href='fotos_dia.html'" href="#">Fotos do Dia</a>
                    <a class="nav-link" onclick="window.location.href='fotos_marte.html'" href="#">Fotos de Marte</a>
                    <a class="nav-link" onclick="window.location.href='Asteroidea.html'" href="#">Asteroides</a>
                    <a class="nav-link" onclick="window.location.href='sobre_projeto.html'" href="#">Sobre o Projeto</a>
                    <a class="nav-link" onclick="window.location.href='contato.html'" href="#">Fale Conosco</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h2>Asteroides próximos à Terra</h2>
        <div id="asteroid-gallery" class="row g-0">
        </div>
    </div>

    <script>const KEY = "v6mwGEzjfWieSldtxAbmeOEPmk8K3sH1vSd25bLg"; 
        const galeria = document.getElementById("asteroid-gallery");

        async function carregarAsteroides() {
            try {
                const hoje = new Date().toISOString().split('T')[0];

                const res = await fetch(`https://api.nasa.gov/neo/rest/v1/feed?start_date=${hoje}&end_date=${hoje}&api_key=${KEY}`);
                const data = await res.json();

                const asteroides = data.near_earth_objects[hoje];
                if (!asteroides || asteroides.length === 0) {
                    galeria.innerHTML = "<p> Nenhum asteroide próximo da Terra hoje.</p>";
                    return;
                }

                asteroides.forEach(asteroide => {
                    const col = document.createElement("div");
                    col.classList.add("col-md-4", "p-2");

                    const card = document.createElement("div");
                    card.classList.add("card-country");

                    const titulo = document.createElement("h5");
                    titulo.textContent = asteroide.name;
                    card.appendChild(titulo);

                    const texto = document.createElement("p");

                    const missDistanceKm = parseFloat(asteroide.close_approach_data[0].miss_distance.kilometers).toFixed(0);

                    const minDiametro = parseFloat(asteroide.estimated_diameter.meters.estimated_diameter_min).toFixed(1);
                    const maxDiametro = parseFloat(asteroide.estimated_diameter.meters.estimated_diameter_max).toFixed(1);

                    const velocidade = parseFloat(asteroide.close_approach_data[0].relative_velocity.kilometers_per_hour).toFixed(0);

                    texto.textContent = `O asteroide ${asteroide.name} passará próximo da Terra em ${asteroide.close_approach_data[0].close_approach_date}. Ele possui tamanho estimado entre ${minDiametro} m e ${maxDiametro} m de diâmetro e viajará a aproximadamente ${velocidade} km/h. A distância mínima prevista da Terra é de ${missDistanceKm} km.`;
                    card.appendChild(texto);

                    const link = document.createElement("a");
                    link.href = asteroide.nasa_jpl_url;
                    link.textContent = "Mais informações";
                    link.target = "_blank";
                    link.classList.add("btn-link");
                    card.appendChild(link);

                    col.appendChild(card);
                    galeria.appendChild(col);
                });

            } catch (err) {
                console.error("Erro ao carregar asteroides:", err);
                galeria.innerHTML = "<p>Erro ao carregar os dados.</p>";
            }
        }

        carregarAsteroides();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous">
        </script>
</body>

</html>
